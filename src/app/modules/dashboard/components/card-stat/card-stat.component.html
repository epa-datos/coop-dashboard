<div class="card card-stats mb-4 mb-xl-0" [style.height]="height">
    <div class="card-body">
        <div class="metric-container"
            [ngClass]="{ 'with-icon': stat.icon, 'with-submetric' : stat.subKpis, 'reduced-padding' : reducedPadding }">
            <div class="metric-data">
                <p class="card-title text-uppercase text-muted mb-0"
                    [ngClass]="{'h4': !smallHeader, 'h5': smallHeader}">{{ stat.title }}</p>
                <!-- content -->
                <p *ngIf="!loader" class="metric-details">
                    <ng-container [ngSwitch]="stat.format">
                        <div class="h3 font-weight-bold mb-0" [ngClass]="{'mr-1': stat.symbol}">
                            <span *ngSwitchCase="'percentage'">
                                {{ stat.value | number : '1.2-2' }}%
                            </span>
                            <span *ngSwitchCase="'decimal'">
                                {{ stat.value | number : '1.2-2' }}
                            </span>
                            <span *ngSwitchCase="'integer'">
                                {{ stat.value | number : '1.0-0' }}
                            </span>

                            <app-star-raiting *ngSwitchCase="'score'" [value]="stat.value"></app-star-raiting>

                            <span *ngSwitchDefault class="h3 font-weight-bold mb-0">
                                {{ stat.value }}
                            </span>
                        </div>
                    </ng-container>
                    <span class="h3 font-weight-bold mb-0">{{ stat.symbol }}</span>
                </p>

                <!-- loader -->
                <ng-container *ngIf="loader">
                    <div class="bar-loader mt-1"></div>
                </ng-container>
            </div>
            <div class="metric-icon" *ngIf="stat.icon">
                <div class="icon icon-shape text-white rounded-circle shadow" [style.background-color]="stat.iconBg">
                    <i [ngClass]="stat.icon"></i>
                </div>
            </div>
        </div>
        <div *ngIf="stat.subKpis" class="submetrics-container text-muted"
            [ngClass]="{ 'reduced-padding' : reducedPadding }">
            <div class="submetrics-wrapper my-0 h5">
                <div class="submetric-data" *ngFor="let subKip of stat.subKpis">
                    <span class="text-nowrap mr-1 text-muted text-uppercase">{{ subKip.title }} </span>

                    <p *ngIf="!loader" class="submetric-details">
                        <ng-container [ngSwitch]="subKip.format">
                            <span *ngSwitchCase="'percentage'" class="text-muted">
                                {{ subKip.value | number : '1.2-2' }}%
                            </span>
                            <span *ngSwitchCase="'decimal'" class="text-muted">
                                {{ subKip.value | number : '1.2-2' }}
                            </span>
                            <span *ngSwitchCase="'integer'" class="text-muted">
                                {{ subKip.value | number : '1.0-0' }}
                            </span>
                            <span *ngSwitchDefault class="text-muted">
                                {{ subKip.value }}
                            </span>
                        </ng-container>
                        <span class="text-muted ml-1">{{ subKip.symbol }}</span>
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>