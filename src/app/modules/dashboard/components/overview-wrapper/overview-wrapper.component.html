<div class="main-container mt-5">
    <!-- CARD STATS -->
    <div class="row">
        <div class="col-12">
            <div class="stats-container">
                <app-card-stat *ngFor="let stat of kpis" [stat]="stat" [loader]="kpisReqStatus <= 1"></app-card-stat>
            </div>
        </div>
    </div>

    <div class="row mt-5" *ngIf="selectedType === 'country'">
        <div class="col-12">
            <div class="pills-container">
                <ul class="nav nav-pills nav-fill">
                    <li class="nav-item">
                        <a class="nav-link p-2" [ngClass]="{'active': selectedTab1 === 1}"
                            (click)="getCategoriesBySector('Search', 1)">Search</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link p-2" [ngClass]="{'active': selectedTab1 === 2}"
                            (click)="getCategoriesBySector('Marketing', 2)">Marketing</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link p-2" [ngClass]="{'active': selectedTab1 === 3}"
                            (click)="getCategoriesBySector('Ventas', 3)">Ventas</a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="col-12 mt-4">
            <div class="card">
                <div class="card-header">
                    <ng-container [ngSwitch]="selectedTab1">
                        <span *ngSwitchCase="1" class="h4">Categorías por Retailer - Search</span>
                        <span *ngSwitchCase="2" class="h4">Categorías por Retailer - Marketing</span>
                        <span *ngSwitchCase="3" class="h4">Categorías por Retailer - Ventas</span>
                    </ng-container>
                </div>
                <div class="card-body">
                    <div class="chart-legend mt-0 mb-2">
                        <div class="legend-container">
                            <div class="legend-square on"></div>
                            <div class="legend-label">Activas</div>
                        </div>
                        <div class="legend-container ml-3">
                            <div class="legend-square off"></div>
                            <div class="legend-label">Inactivas</div>
                        </div>
                    </div>
                    <app-chart-heat-map [data]="categoriesBySector" [name]="selectedType + 'categories-by-sector'"
                        categoryX="retailer" categoryY="category" height="250px" [showTooltipValue]="false"
                        [showGridBorders]="true" [showHeatLegend]="false" [status]="categoriesReqStatus" [minValue]="0"
                        [maxValue]="1" initialColor="#e9e9e9">
                    </app-chart-heat-map>
                </div>
            </div>
        </div>
    </div>

    <div class="row mt-5" *ngIf="selectedType === 'retailer'">
        <div class="col-12 mt-4">
            <div class="card">
                <div class="card-header">
                    <span class="h4">Categorías por Sector</span>
                </div>
                <div class="card-body">
                    <div class="chart-legend mt-0 mb-2">
                        <div class="legend-container">
                            <div class="legend-square on"></div>
                            <div class="legend-label">Activas</div>
                        </div>
                        <div class="legend-container ml-3">
                            <div class="legend-square off"></div>
                            <div class="legend-label">Inactivas</div>
                        </div>
                    </div>
                    <app-chart-heat-map [data]="categoriesXSector" [name]="selectedType + 'categories-by-sector'"
                        categoryX="sector" categoryY="category" height="250px" [showTooltipValue]="false"
                        [showGridBorders]="true" [showHeatLegend]="false" [minValue]="0" [maxValue]="1"
                        initialColor="#e9e9e9">
                    </app-chart-heat-map>
                </div>
            </div>
        </div>
    </div>

    <div class="row mt-5">
        <div class="col-12">
            <div class="pills-container">
                <ul class="nav nav-pills nav-fill">
                    <li class="nav-item">
                        <a class="nav-link p-2" [ngClass]="{'active': selectedTab2 === 1}"
                            (click)="getDataByTrafficAndSales('traffic', 1)">Tráfico</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link p-2" [ngClass]="{'active': selectedTab2 === 2}"
                            (click)="getDataByTrafficAndSales('sales', 2)">Ventas</a>
                    </li>
                </ul>
            </div>
        </div>
        <!-- devices -->
        <div class="col-12 col-md-6 mt-4">
            <div class="card">
                <div class="card-header">
                    <span class="h4">{{selectedTab2 === 1 ? 'Tráfico' : 'Ventas'}} por dispositivos</span>
                </div>
                <div class="card-body">
                    <app-chart-pictorial [data]="trafficAndSales['device']" [name]="selectedType + 'devices'"
                        category="name" iconType="monitor" [status]="trafficSalesReqStatus[0].reqStatus" height="280px">
                    </app-chart-pictorial>
                </div>
            </div>
        </div>

        <!-- gender -->
        <div class="col-12 col-md-6 mt-4">
            <div class="card">
                <div class="card-header">
                    <span class="h4">{{selectedTab2 === 1 ? 'Tráfico' : 'Ventas'}} por Género</span>
                </div>
                <div class="card-body">
                    <app-chart-pictorial [data]="trafficAndSales['gender']" [name]="selectedType + 'gender'"
                        category="name" iconType="man" [status]="trafficSalesReqStatus[1].reqStatus" height="280px">
                    </app-chart-pictorial>
                </div>
            </div>
        </div>

        <!-- age -->
        <div class="col-12 col-md-6 mt-4">
            <div class="card">
                <div class="card-header">
                    <span class="h4">{{selectedTab2 === 1 ? 'Tráfico' : 'Ventas'}} por Edad</span>
                </div>
                <div class="card-body">
                    <app-chart-lollipop [data]="trafficAndSales['age']" [name]="selectedType + 'age'" category="age"
                        [value]="selectedTab2 === 1 ? 'visits' : 'sales'" height="280px"
                        [status]="trafficSalesReqStatus[2].reqStatus">
                    </app-chart-lollipop>
                </div>
            </div>
        </div>

        <!-- age and gender -->
        <div class="col-12 col-md-6 mt-4">
            <div class="card">
                <div class="card-header">
                    <span class="h4">{{selectedTab2 === 1 ? 'Tráfico' : 'Ventas'}} por Género y Edad</span>
                </div>
                <div class="card-body">
                    <app-chart-pyramid [data]="trafficAndSales['genderByAge']" [name]="selectedType + 'age-and-gender'"
                        [status]="trafficSalesReqStatus[3].reqStatus" height="280px">
                    </app-chart-pyramid>
                </div>
            </div>
        </div>
    </div>

    <div class="row mt-5">
        <div class="col-12">
            <div class="pills-container">
                <ul class="nav nav-pills nav-fill">
                    <li class="nav-item">
                        <a class="nav-link p-2" [ngClass]="{'active': selectedTab3 === 1}"
                            (click)="changeSectorData2('users', 1)">Usuarios</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link p-2" [ngClass]="{'active': selectedTab3 === 2}"
                            (click)="changeSectorData2('sales', 2)">Ventas</a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="col-12 mt-4">
            <div class="card">
                <div class="card-header">
                    <span class="h4" [hidden]="selectedTab3 === 2">Usuarios por Sector</span>
                    <span class="h4" [hidden]="selectedTab3 === 1">Ventas por Sector</span>
                </div>
                <div class="card-body">
                    <app-chart-line-series [valueName]="valueName" [valueFormat]="selectedTab3 === 2 && 'USD'"
                        [series]="saleAndUsersBySector" [name]="selectedType + 'sales-users-by-sector'">
                    </app-chart-line-series>
                </div>
            </div>
        </div>
    </div>

    <div class="row mt-5">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <span class="h4">Inversión vs Revenue</span>
                </div>
                <div class="card-body">
                    <app-chart-line-comparison [data]="investmentVsRevenue"
                        [name]="selectedType + 'investment-vs-revenue'" value1="investment" value2="revenue"
                        valueName1="Inversión" valueName2="Revenue" valueFormat="USD">
                    </app-chart-line-comparison>
                </div>
            </div>
        </div>
    </div>
</div>